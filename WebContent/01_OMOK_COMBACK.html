<!DOCTYPE html>
<html>
<head>
<style>
table, tr, td {
	border: 0px;
	padding: 0px;
	border-collapse: collapse;
}

img {
	display: block;
}
</style>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="jquery-1.12.4.js"></script>
<script type="text/javascript">

	var arr2D = new Array();
	var arr2DImg = new Array();
	
	var arrhist = new Array();
	var winner  = 0;
	
	var timerId = 0;
	
	var index_draw = 0;
	
	function init() {

		for (var i = 0; i < 10; i++) {
			var arrRow = new Array();
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arrRow.push(0);
			arr2D.push(arrRow);

		}

		var grids = document.getElementsByClassName("grid");

		for (var i = 0; i < grids.length; i += 10) {
			var arrRowImg = new Array();
			arrRowImg.push(grids[i + 0]);
			arrRowImg.push(grids[i + 1]);
			arrRowImg.push(grids[i + 2]);
			arrRowImg.push(grids[i + 3]);
			arrRowImg.push(grids[i + 4]);
			arrRowImg.push(grids[i + 5]);
			arrRowImg.push(grids[i + 6]);
			arrRowImg.push(grids[i + 7]);
			arrRowImg.push(grids[i + 8]);
			arrRowImg.push(grids[i + 9]);

			arr2DImg.push(arrRowImg);
		}

		for (var i = 0; i < arr2D.length; i++) {
			for (var j = 0; j < arr2D[i].length; j++) {
				arr2DImg[i][j].alt = "" + i + "," + j + "";

			}
		}
		
		fn_ajax1();

	}
	
	
	function fn_ajax1(){
		$.ajax({

			type : "get",
			url : "mycomback",
			data : { param1: 'merryChristmax'},
			dataType : "json",

			success : function(data) {
				
				renderTable(data);
			},
			error : function(xhr, status, error) {
				console.log("에러!: " + error);

			},
		});		
	}
	
	function renderTable(data){
		var text = "";
		for(var i = 0; i < data.length; i++){
			text += "<tr>";
			text += "	<td>"+data[i].pan+"</td>";
			text += "</tr>";
		}
		$("#my_tbody").html(text);
		
	}

	function fn_ajax2(pan){
		$.ajax({

			type : "get",
			url : "mypan",
			data : { pan: pan},
			dataType : "json",

			success : function(data) {
				for (var i = 0; i < data.length; i++) {
					arrhist.push(data[i].history);
				}
				timerId = setInterval(function(){
					fn_draw();
				}, 500);
			},
			error : function(xhr, status, error) {
				console.log("에러!: " + error);

			},
		});		
	}
	
	
	function fn_draw() {
		
		for(var i =0; i < arr2D.length; i++){
			for(var j = 0; j < arr2D[i].length; j++){
				var index_sub = i * 10 + j;
				arr2D[i][j] = arrhist[index_draw].substring(index_sub, index_sub+1);			
			
			}
		}
		myDisplay();
		index_draw++;
		if(index_draw >= arrhist.length){
			clearInterval(timerId);
			timerId = 0;
		}
		
		
	}
	
	function renderTable(data){
		var text = "";
		for(var i = 0; i < data.length; i++){
			text += "<tr>";
			text += "	<td onclick = 'fn_ajax2("+data[i].pan +")'>["+data[i].pan+"]복기하기</td>";
			text += "</tr>";
		}
		$("#my_tbody").html(text);
		
	}
	
	function myDisplay() {
		
		for (var i = 0; i < arr2D.length; i++) {
			for (var j = 0; j < arr2D[i].length; j++) {
				arr2DImg[i][j].src = "01/" + arr2D[i][j] + ".jpg";

			}
		}
	}
</script>
</head>
<body onload="init()">
	<table>
		<thead>
			<tr>
				<td>
					판 순서
				</td>	
			</tr>
		</thead>
		<tbody id ="my_tbody">
			<tr>
				<td>___</td>	
			</tr>
		</tbody>	
	</table>


	<table>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
		<tr>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
			<td><img class="grid" src="01/0.jpg" ></td>
		</tr>
	</table>
	
</body>
</html>